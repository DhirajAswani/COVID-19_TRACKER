<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js">
  <!--<![endif]-->
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>CoVis-19-Tracker</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
  </head>
  <body>
    <!--[if lt IE 7]>
      <p class="browsehappy">
        You are using an <strong>outdated</strong> browser. Please
        <a href="#">upgrade your browser</a> to improve your experience.
      </p>
    <![endif]-->

    <!-- <div>
      <form name="demoform">
        <select name="country" onchange="getCountries()" id="countries">
          <option>Select Country</option>
        </select>
      </form>

      <span id="output"></span>
    </div> -->
    <div class="bs-example">
        <nav class="navbar navbar-expand-md navbar-light bg-light">
            <a href="#" class="navbar-brand">
                <img src="https://images.unsplash.com/photo-1583324113626-70df0f4deaab?ixlib=rb-1.2.1&q=80&fm=jpg&crop=entropy&cs=tinysrgb&w=1080&fit=max&ixid=eyJhcHBfaWQiOjEyMDd9" height="36" alt="CoolBrand">
            </a>
            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <div class="collapse navbar-collapse text-center" id="navbarCollapse">
                <div class="navbar-nav">
                    <h1>COVID-19 TRACKER</h1>
                </div>
                
            </div>
        </nav>
    </div>
    <div class="text-center ">
        <h2>India</h2>
    </div>
   

    <div class="container">
      <div class="row">
        <div
          class="card text-white bg-primary mb-4 col-sm-4 mr-4 md-col-4 mx-auto mt-5 rounded "
          style="max-width: 18rem;"
        >
          <div class="card-header"><h1>Confirmed</h1></div>
          <div class="card-body">
            
            <p class="card-text">
                <h3><span id="confirmed_cases"></span></h3>
                <h3><span id="last_update"></span></h3>
                <h4>Number of Active Cases of COVID-19</h4>
            </p>
          </div>
        </div>

        <div
          class="card text-white bg-success mb-4 col-sm-4 mr-4 md-col-4 mx-auto mt-5 rounded"
          style="max-width: 18rem;"
        >
          <div class="card-header"><h1>Recovered</h1></div>
          <div class="card-body">
            
            <p class="card-text">
                <h3><span id="recovered_cases"></span></h3>
                <h3><span id="last_update1"></span></h3>
                <h4>Number of Recoveries from COVID-19</h4>
            </p>
          </div>
        </div>

        <div
          class="card text-white bg-danger mb-4 col-sm-4 md-col-4 mx-auto mt-5 rounded"
          style="max-width: 18rem;"
        >
          <div class="card-header"><h1>Deaths</h1></div>
          <div class="card-body">
            
            <p class="card-text">
                <h3><span id="deaths"></span></h3>
                <h3><span id="last_update2"></span></h3>
                <h4>Number of Deaths from COVID-19</h4>
            </p>
          </div>
        </div>
      </div>
    </div>


    <div class="bs-example">
        <nav class="navbar navbar-expand-md navbar-light bg-light mt-4">
            <h6>Created By <a href="https://dhirajaswani.github.io/portfolio_website/">Dhiraj Aswani</a></h6>

            
        </nav>
    </div>

    <script>
      const api_url = "https://covid19.mathdro.id/api/countries/India";

      const api_countries = "https://covid19.mathdro.id/api/countries/";
      async function getCountries() {
        const response = await fetch(api_countries);
        const countries = await response.json();
        // let arr = countries[0];
        console.log(countries);
        // console.log(countries.countries[15].name);
        var country_names = new Array();

        for (let i = 0; i < 185; i++) {
          //   console.log(countries.countries[i].name);
          var temp = await countries.countries[i].name;
          country_names.push(temp);
        }

        // console.log(country_names);

        //only country name
        // console.log(countries.countries[0].name);
        // ******************************************************************************
        // Working code

        // var select = document.getElementById("countries");
        // for (var i = 0; i < country_names.length; i++) {
        //   var option = document.createElement("OPTION");
        //   txt = document.createTextNode(country_names[i]);
        //   option.appendChild(txt);
        //   option.setAttribute("value", country_names[i]);
        //   select.insertBefore(option, select.lastChild);
        // }
        // ****************************************************************************************
        // selectElement = document.querySelector("#countries");

        // output = selectElement.value;

        // document.querySelector(".output").textContent = output;

        // var e = document.getElementById("countries");
        // var strUser = e.options[e.selectedIndex].text;
        // console.log(strUser);
        // *****************************************************************************************
        // Working Code
        // var theselect = demoform.country;
        // var output = document.getElementById("output");
        // output.innerHTML = theselect[theselect.selectedIndex].text;
        // var country_name = theselect[theselect.selectedIndex].text;
        // console.log(country_name);

        // **********************************************************************************
      }
      async function getData() {
        const response = await fetch(api_url);
        const data = await response.json();
        console.log(data);
        const modifiedData = {
          confirmed: data.confirmed,
          recovered: data.recovered,
          deaths: data.deaths,
          lastUpdate: data.lastUpdate,
        };
        console.log(modifiedData.confirmed.value);
        console.log(modifiedData.deaths.value);
        console.log(modifiedData.recovered.value);
        console.log(modifiedData.lastUpdate);
        document.getElementById("confirmed_cases").innerHTML =
          modifiedData.confirmed.value;
        document.getElementById("recovered_cases").innerHTML =
          modifiedData.recovered.value;
        document.getElementById("deaths").innerHTML = modifiedData.deaths.value;
        document.getElementById("last_update").innerHTML = new Date(
          modifiedData.lastUpdate
        ).toDateString();
        document.getElementById("last_update1").innerHTML = new Date(
          modifiedData.lastUpdate
        ).toDateString();
        document.getElementById("last_update2").innerHTML = new Date(
          modifiedData.lastUpdate
        ).toDateString();
      }

      getData();
      getCountries();
    </script>

    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha384-J6qa4849blE2+poT4WnyKhv5vZF5SrPo0iEjwBvKU7imGFAV0wwj1yYfoRSJoZ+n"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
